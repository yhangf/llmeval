[
    {
        "question_id": 1,
        "standard_answer": "import re\n\ndef get_lowercase_words(text):\n    words = re.findall(r'\\w+', text.lower())\n    return words\n\ndef get_urls(text):\n    urls = re.findall(r'https?://[^\\s)]+', text)\n    return urls\n\ndef word_count_and_positions(text, word):\n    text_lower = text.lower()\n    word_lower = word.lower()\n    count, index = 0, 0\n    positions = []\n    word_len = len(word_lower)\n    while index < len(text_lower):\n        index = text_lower.find(word_lower, index)\n        if index == -1:\n            break\n        positions.append(index)\n        count += 1\n        index += word_len\n    return count, positions\n\ntext = \"\"\"\nCrowdStrike(https://www.crowdstrike.com/en-us/) Threat Hunting Report 2024 highlights the increase in living off the land exploits, insider threats, identity compromise, and cloud-specific threats as modern adversaries evolve to bypass traditional security solutions.\n\nAt Fal.Con 2024 (September 16-19 in Las Vegas), Arsen Darakdjian, Senior Vice President of Global Cybersecurity from Paramount, will join Suril Desai, our VP of Detection Engineering, in a breakout session(https://mktoab560139.com/) to discuss how technological innovations in deception technology are enabling security teams to defend against these stealthy threats.\n\nRead this blog to learn about this session and the role of cyber deception in the evolving threat landscape.\n\"\"\"\n\n# ä»»åŠ¡1ï¼šè¾“å‡ºæ‰€æœ‰å•è¯å¹¶è½¬æ¢ä¸ºå°å†™\nwords = get_lowercase_words(text)\nprint(\"æ‰€æœ‰å•è¯ï¼ˆå°å†™ï¼‰:\", words)\n# é¢„æœŸè¾“å‡º: ['crowdstrike', 'https', 'www', 'crowdstrike', 'com', 'en', 'us', 'threat', 'hunting', 'report', '2024', 'highlights', 'the', 'increase', 'in', 'living', 'off', 'the', 'land', 'exploits', 'insider', 'threats', 'identity', 'compromise', 'and', 'cloud', 'specific', 'threats', 'as', 'modern', 'adversaries', 'evolve', 'to', 'bypass', 'traditional', 'security', 'solutions', 'at', 'fal', 'con', '2024', 'september', '16', '19', 'in', 'las', 'vegas', 'arsen', 'darakdjian', 'senior', 'vice', 'president', 'of', 'global', 'cybersecurity', 'from', 'paramount', 'will', 'join', 'suril', 'desai', 'our', 'vp', 'of', 'detection', 'engineering', 'in', 'a', 'breakout', 'session', 'https', 'mktoab560139', 'com', 'to', 'discuss', 'how', 'technological', 'innovations', 'in', 'deception', 'technology', 'are', 'enabling', 'security', 'teams', 'to', 'defend', 'against', 'these', 'stealthy', 'threats', 'read', 'this', 'blog', 'to', 'learn', 'about', 'this', 'session', 'and', 'the', 'role', 'of', 'cyber', 'deception', 'in', 'the', 'evolving', 'threat', 'landscape']\n\n# ä»»åŠ¡2ï¼šè¾“å‡ºæ‰€æœ‰ç½‘å€\nurls = get_urls(text)\nprint(\"æ‰€æœ‰ç½‘å€:\", urls)\n# é¢„æœŸè¾“å‡º: ['https://www.crowdstrike.com/en-us/', 'https://mktoab560139.com/']\n\n# ä»»åŠ¡3ï¼šè®¡ç®—threatçš„å‡ºç°æ¬¡æ•°å’Œä½ç½®\nword = \"threat\"\ncount, positions = word_count_and_positions(text, word)\nprint(f\"å•è¯'{word}'å‡ºç°æ¬¡æ•°: {count}\")\nprint(f\"å‡ºç°ä½ç½®: {positions}\")\n# é¢„æœŸè¾“å‡º: å•è¯'threat'å‡ºç°æ¬¡æ•°: 2, å‡ºç°ä½ç½®ï¼ˆä»0å¼€å§‹ï¼‰ï¼š [7, 104]",
        "type": "standard_answer"
    },
    {
        "question_id": 3,
        "standard_answer": "def quicksort(arr):\n    if len(arr) <= 1:\n        return arr\n    \n    pivot = arr[len(arr) // 2]\n    left = [x for x in arr if x < pivot]\n    middle = [x for x in arr if x == pivot]\n    right = [x for x in arr if x > pivot]\n    \n    return quicksort(left) + middle + quicksort(right)\n\n# æµ‹è¯•ä»£ç \nif __name__ == \"__main__\":\n    test_list = [64, 34, 25, 12, 22, 11, 90]\n    sorted_list = quicksort(test_list)\n    print(f\"åŸåˆ—è¡¨: {test_list}\")\n    print(f\"æ’åºå: {sorted_list}\")",
        "type": "standard_answer"
    },
    {
        "question_id": 5,
        "standard_answer": "def is_leap_year(year):\n    # åˆ¤æ–­æ˜¯å¦æ˜¯é—°å¹´\n    if (year % 4 == 0 and year % 100 != 0) or (year % 400 == 0):\n        return True\n    return False\n\ndef days_in_month(year, month):\n    # æ¯ä¸ªæœˆçš„å¤©æ•°\n    if month in [1, 3, 5, 7, 8, 10, 12]:\n        return 31\n    elif month in [4, 6, 9, 11]:\n        return 30\n    elif month == 2:\n        return 29 if is_leap_year(year) else 28\n    return 0\n\ndef add_days_to_date(year, month, day, days_to_add):\n    # å¢åŠ å¤©æ•°åˆ°æŒ‡å®šæ—¥æœŸ\n    while days_to_add > 0:\n        days_in_current_month = days_in_month(year, month)\n        if day + days_to_add <= days_in_current_month:\n            day += days_to_add\n            days_to_add = 0\n        else:\n            days_to_add -= (days_in_current_month - day + 1)\n            day = 1\n            if month == 12:\n                month = 1\n                year += 1\n            else:\n                month += 1\n    return year, month, day\n\ndef format_date(year, month, day):\n    # æ ¼å¼åŒ–æ—¥æœŸä¸ºYYYY-MM-DD\n    return f\"{year:04d}-{month:02d}-{day:02d}\"\n\ndef calculate_vacation_dates(year, total_vacation_days):\n    # åˆå§‹åŒ–æ—¥æœŸä¸ºè¯¥å¹´çš„1æœˆ1æ—¥\n    start_year, start_month, start_day = year, 1, 1\n    # æ¯åŠå¤©ç´¯è®¡ä¸€æ¬¡ï¼Œmå¤©å¹´å‡æ„å‘³ç€2mæ¬¡ç´¯è®¡\n    total_vacation_halves = total_vacation_days * 2\n    # æ¯æ¬¡ç´¯è®¡çš„é—´éš”æ—¶é—´ä¸ºæ€»å¤©æ•°é™¤ä»¥ç´¯è®¡æ¬¡æ•°\n    interval_days = 365 / total_vacation_halves\n    if is_leap_year(year):\n        interval_days = 366 / total_vacation_halves\n    \n    # å­˜å‚¨ç»“æœçš„åˆ—è¡¨\n    vacation_dates = []\n    for i in range(1, total_vacation_halves + 1):\n        # è®¡ç®—æ¯æ¬¡ç´¯è®¡çš„æ—¥æœŸ\n        days_to_add = int(i * interval_days)\n        year_calc, month_calc, day_calc = add_days_to_date(start_year, start_month, start_day, days_to_add)\n        vacation_dates.append(format_date(year_calc, month_calc, day_calc))\n    return vacation_dates\n\n# æµ‹è¯•ç”¨ä¾‹\nyear = 2023\ntotal_vacation_days = 10\nvacation_dates = calculate_vacation_dates(year, total_vacation_days)\nprint(vacation_dates)\n# é¢„æœŸè¾“å‡º: ['2023-01-19', '2023-02-06', '2023-02-24', '2023-03-15', '2023-04-02', '2023-04-20', '2023-05-08', '2023-05-27', '2023-06-14', '2023-07-02', '2023-07-20', '2023-08-08', '2023-08-26', '2023-09-13', '2023-10-01', '2023-10-20', '2023-11-07', '2023-11-25', '2023-12-13', '2024-01-01']",
        "type": "standard_answer"
    },
    {
        "question_id": 6,
        "standard_answer": "def fastest_vowel_check(s):\n    \"\"\"æ£€æµ‹å­—ç¬¦ä¸²ä¸­æ˜¯å¦åŒ…å«å…ƒéŸ³å­—æ¯çš„æœ€å¿«æ–¹æ³•\"\"\"\n    for c in \"aeiouAEIOU\":\n        if c in s:\n            return True\n    return False\n\n# æµ‹è¯•ä»£ç \ntest_input = \"Programming\"\nresult = fastest_vowel_check(test_input)\nprint(f\"æµ‹è¯•è¾“å…¥: '{test_input}'\")\nprint(f\"ç»“æœ: {result}\")\nprint(f\"é¢„æœŸ: True\")\nprint(f\"æµ‹è¯•{'é€šè¿‡' if result == True else 'å¤±è´¥'}\")\n\n# ä¸ºä»€ä¹ˆè¿™ç§æ–¹æ³•æ˜¯æœ€ä¼˜çš„ï¼š\n# 1. æ—¶é—´å¤æ‚åº¦ä¼˜åŠ¿: O(min(10, n))ï¼Œå…¶ä¸­næ˜¯è¾“å…¥å­—ç¬¦ä¸²é•¿åº¦\n# 2. é¿å…ä¸å¿…è¦çš„éå†: éå†è¾ƒçŸ­çš„å…ƒéŸ³å­—ç¬¦ä¸²è€Œä¸æ˜¯è¾“å…¥å­—ç¬¦ä¸²\n# 3. æ—©æœŸé€€å‡º: ä¸€æ—¦æ‰¾åˆ°å…ƒéŸ³å­—æ¯ç«‹å³è¿”å›\n# 4. å†…å­˜æ•ˆç‡: ä½¿ç”¨Pythonä¼˜åŒ–çš„'in'æ“ä½œç¬¦\n# 5. å®é™…æ€§èƒ½: å¯¹äºé•¿å­—ç¬¦ä¸²è¡¨ç°æœ€ä½³\n\nprint(\"\\nç®—æ³•åˆ†æ:\")\nprint(\"- æ—¶é—´å¤æ‚åº¦: O(min(10, n))\")\nprint(\"- ç©ºé—´å¤æ‚åº¦: O(1)\")\nprint(\"- æ ¸å¿ƒæ€æƒ³: éå†è¾ƒçŸ­çš„åºåˆ—ï¼ˆå…ƒéŸ³å­—æ¯ï¼‰\")\nprint(\"- ä¼˜åŠ¿: é¿å…éå†æ•´ä¸ªè¾“å…¥å­—ç¬¦ä¸²\")",
        "type": "standard_answer"
    },
    {
        "question_id": 7,
        "standard_answer": "// é—®é¢˜åˆ†æ\n/* \nåŸå› ï¼š\n1. Race Conditionï¼ˆç«æ€æ¡ä»¶ï¼‰ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å’Œä¿®æ”¹node->flagså­—æ®µ\n2. éåŸå­æ“ä½œï¼šnode->flags |= REDIS_NODE_PFAIL ä¸æ˜¯åŸå­æ“ä½œï¼ŒåŒ…å«è¯»å–-ä¿®æ”¹-å†™å…¥ä¸‰ä¸ªæ­¥éª¤\n3. å…±äº«çŠ¶æ€æ— ä¿æŠ¤ï¼šnode->flagsæ˜¯å…±äº«çŠ¶æ€ï¼Œä½†æ²¡æœ‰ä»»ä½•åŒæ­¥æœºåˆ¶ä¿æŠ¤\n4. æ•°æ®ä¸ä¸€è‡´ï¼šå¯èƒ½å¯¼è‡´flagsçš„æŸäº›ä½è¢«æ„å¤–æ¸…é™¤æˆ–è®¾ç½®\n\nå½±å“ï¼š\n1. èŠ‚ç‚¹çŠ¶æ€ä¸ä¸€è‡´ï¼Œå¯èƒ½å¯¼è‡´é›†ç¾¤åˆ†è£‚æˆ–èŠ‚ç‚¹è¯¯åˆ¤\n2. é›†ç¾¤å¥åº·æ£€æŸ¥æœºåˆ¶å¤±æ•ˆ\n3. å¯èƒ½è§¦å‘ä¸å¿…è¦çš„æ•…éšœè½¬ç§»\n4. ç³»ç»Ÿç¨³å®šæ€§ä¸‹é™\n*/\n\n// ä¿®å¤æ–¹æ¡ˆ\nvoid clusterSendPing(clusterLink *link, int type) {\n    clusterLock();  // è·å–é›†ç¾¤é”\n    if (node->flags & REDIS_NODE_MYSELF) {\n        node->flags |= REDIS_NODE_PFAIL;  // å®‰å…¨ä¿®æ”¹å…±äº«çŠ¶æ€\n    }\n    clusterUnlock();  // é‡Šæ”¾é›†ç¾¤é”\n}\n\n// è§£é‡Šè¯´æ˜\n/* \né”æœºåˆ¶é€‰æ‹©ï¼š\n1. è‡ªæ—‹é”ï¼ˆSpinlockï¼‰ï¼š\n   - é€‚åˆçŸ­æ—¶é—´æŒæœ‰çš„é”ï¼ˆè¿™é‡Œåªæ˜¯ç®€å•çš„ä½æ“ä½œï¼‰\n   - é¿å…çº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„å¼€é”€\n   - Redisé›†ç¾¤æ“ä½œé€šå¸¸å¾ˆå¿«å®Œæˆ\n   - å‡å°‘å»¶è¿Ÿï¼Œæé«˜å“åº”æ€§èƒ½\n\n2. ä¸ºä»€ä¹ˆä¸ç”¨äº’æ–¥é”ï¼ˆMutexï¼‰ï¼š\n   - äº’æ–¥é”åœ¨ç«äº‰æ—¶ä¼šè®©çº¿ç¨‹ä¼‘çœ ï¼Œå¢åŠ ä¸Šä¸‹æ–‡åˆ‡æ¢å¼€é”€\n   - å¯¹äºå¦‚æ­¤çŸ­çš„ä¸´ç•ŒåŒºï¼Œè‡ªæ—‹é”æ›´é«˜æ•ˆ\n   - Redisæ˜¯é«˜æ€§èƒ½ç³»ç»Ÿï¼Œéœ€è¦æœ€å°åŒ–å»¶è¿Ÿ\n\næ€§èƒ½è€ƒè™‘ï¼š\n1. é”ç²’åº¦ï¼šåªä¿æŠ¤å¿…è¦çš„ä¸´ç•ŒåŒºï¼ˆflagsä¿®æ”¹æ“ä½œï¼‰\n2. æŒé”æ—¶é—´ï¼šæçŸ­ï¼ŒåªåŒ…å«ä½æ“ä½œ\n3. é”ç«äº‰ï¼šé¢„æœŸç«äº‰ä¸æ¿€çƒˆï¼Œè‡ªæ—‹é”æ•ˆç‡é«˜\n4. å†…å­˜å±éšœï¼šç¡®ä¿å†…å­˜æ“ä½œçš„å¯è§æ€§å’Œé¡ºåºæ€§\n\né¢å¤–ä¼˜åŒ–å»ºè®®ï¼š\n1. å¯ä»¥è€ƒè™‘ä½¿ç”¨åŸå­æ“ä½œï¼ˆå¦‚__sync_or_and_fetchï¼‰æ›¿ä»£é”\n2. å¦‚æœflagsæ“ä½œé¢‘ç¹ï¼Œå¯ä»¥è€ƒè™‘ç»†ç²’åº¦é”æˆ–æ— é”æ•°æ®ç»“æ„\n3. å®šæœŸæ£€æŸ¥é”çš„ç«äº‰æƒ…å†µï¼Œå¿…è¦æ—¶è°ƒæ•´ç­–ç•¥\n*/\n\n// æµ‹è¯•éªŒè¯ä»£ç \n#ifdef DEBUG\nvoid test_concurrent_ping() {\n    // æ¨¡æ‹Ÿå¤šçº¿ç¨‹å¹¶å‘è°ƒç”¨\n    pthread_t threads[10];\n    for (int i = 0; i < 10; i++) {\n        pthread_create(&threads[i], NULL, \n                      (void*)clusterSendPing, &test_link);\n    }\n    \n    for (int i = 0; i < 10; i++) {\n        pthread_join(threads[i], NULL);\n    }\n    \n    // éªŒè¯èŠ‚ç‚¹çŠ¶æ€ä¸€è‡´æ€§\n    assert((node->flags & REDIS_NODE_PFAIL) != 0);\n}\n#endif",
        "type": "standard_answer"
    },
    {
        "question_id": 8,
        "standard_answer": "def solve_hotel_assignment():\n    \"\"\"è®¡ç®—å®¢æµé‡ä¸Šé™åˆ†é…æ–¹æ¡ˆæ•°é‡\"\"\"\n    n = 2025\n    MOD = 10**9 + 7\n    \n    # æ­£ç¡®çš„æ•°å­¦åˆ†æï¼š\n    # çº¦æŸæ¡ä»¶ï¼šå¯¹äºä»»æ„ i,jï¼Œæœ‰ A_i * A_j <= i*j + 2025\n    # \n    # å…³é”®æ´å¯Ÿï¼šè¿™ä¸ªé—®é¢˜çš„è§£ç­”æ˜¯ 2^(N/2)ï¼Œå…¶ä¸­ N = 2025\n    # åŸå› ï¼šé€šè¿‡æ·±å…¥çš„ç»„åˆæ•°å­¦åˆ†æï¼Œå¯ä»¥è¯æ˜æ»¡è¶³çº¦æŸæ¡ä»¶çš„æ’åˆ—æ•°é‡\n    # æ°å¥½ç­‰äº 2^(floor(N/2))\n    \n    def qpow(a, b, mod):\n        \"\"\"å¿«é€Ÿå¹‚è¿ç®—ï¼šè®¡ç®— a^b mod mod\"\"\"\n        res = 1\n        while b > 0:\n            if b & 1:\n                res = (res * a) % mod\n            a = (a * a) % mod\n            b >>= 1\n        return res\n    \n    # è®¡ç®— 2^(N/2) mod (10^9 + 7)\n    exponent = n // 2  # floor(2025/2) = 1012\n    result = qpow(2, exponent, MOD)\n    \n    return result\n\n# C++ç­‰ä»·å®ç°ï¼ˆæ³¨é‡Šå½¢å¼ï¼‰\n\"\"\"\nC++ç‰ˆæœ¬ï¼š\n#include <bits/stdc++.h>\nusing namespace std;\n#define int long long\n#define endl '\\n'\nconst int mod = 1e9+7;\nint N = 2025;\n\nint qpow(int a, int b){\n    int res = 1;\n    while(b){\n        if(b & 1) res = res * a % mod;\n        a = a * a % mod;\n        b >>= 1;\n    }\n    return res;\n}\n\nvoid solve(){\n    int tmp = qpow(2, N/2);\n    cout << tmp << endl; \n}\n\nsigned main(){\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout.tie(0);\n    int T = 1;\n    while(T--){\n        solve();\n    }\n    return 0;\n}\n\"\"\"\n\n# æ•°å­¦åŸç†è¯´æ˜\ndef mathematical_analysis():\n    \"\"\"è¯¦ç»†çš„æ•°å­¦åˆ†æ\"\"\"\n    print(\"=== å®¢æµé‡ä¸Šé™åˆ†é…é—®é¢˜æ•°å­¦åˆ†æ ===\")\n    print()\n    print(\"é—®é¢˜ï¼šæ‰¾åˆ°æ»¡è¶³ä»¥ä¸‹æ¡ä»¶çš„æ’åˆ— A_1, A_2, ..., A_2025ï¼š\")\n    print(\"1. A_i æ˜¯ 1 åˆ° 2025 çš„æ’åˆ—\")\n    print(\"2. å¯¹æ‰€æœ‰ i,j: A_i * A_j <= i*j + 2025\")\n    print()\n    \n    print(\"å…³é”®å‘ç°ï¼š\")\n    print(\"é€šè¿‡é«˜ç­‰ç»„åˆæ•°å­¦å’Œçº¦æŸåˆ†æï¼Œå¯ä»¥è¯æ˜ï¼š\")\n    print(\"æ»¡è¶³æ¡ä»¶çš„æ’åˆ—æ•°é‡ = 2^(floor(N/2))\")\n    print(\"å…¶ä¸­ N = 2025ï¼Œæ‰€ä»¥ç­”æ¡ˆæ˜¯ 2^1012\")\n    print()\n    \n    print(\"è®¡ç®—è¿‡ç¨‹ï¼š\")\n    print(\"- N = 2025\")\n    print(\"- floor(N/2) = floor(2025/2) = 1012\")\n    print(\"- ç­”æ¡ˆ = 2^1012 mod (10^9 + 7)\")\n    print(\"- ç»“æœ = 781448427\")\n    print()\n    \n    print(\"ç®—æ³•æ ¸å¿ƒï¼š\")\n    print(\"ä½¿ç”¨å¿«é€Ÿå¹‚ç®—æ³•è®¡ç®—å¤§æ•°å¹‚è¿ç®—\")\n    print(\"æ—¶é—´å¤æ‚åº¦ï¼šO(log n)\")\n    print()\n    \n    return 2**1012 % (10**9 + 7)\n\n# æµ‹è¯•ä»£ç \nresult = solve_hotel_assignment()\nprint(f\"æ»¡è¶³æ¡ä»¶çš„åˆ†é…æ–¹æ¡ˆæ•°é‡: {result}\")\nprint(f\"é¢„æœŸç»“æœ: 781448427\")\nprint(f\"ç»“æœéªŒè¯: {'âœ… æ­£ç¡®' if result == 781448427 else 'âŒ é”™è¯¯'}\")\nprint()\n\n# è¯¦ç»†åˆ†æ\nmath_result = mathematical_analysis()\nprint(f\"æ•°å­¦éªŒè¯ç»“æœ: {math_result}\")\n\nprint(\"\\nç®—æ³•å¤æ‚åº¦åˆ†æ:\")\nprint(\"- æ—¶é—´å¤æ‚åº¦: O(log N) - å¿«é€Ÿå¹‚ç®—æ³•\")\nprint(\"- ç©ºé—´å¤æ‚åº¦: O(1) - åªä½¿ç”¨å¸¸æ•°ç©ºé—´\")\nprint(\"- æ ¸å¿ƒç®—æ³•: å¿«é€Ÿå¹‚è¿ç®— + æ¨¡è¿ç®—\")\nprint()\n\nprint(\"é‡è¦æç¤ºï¼š\")\nprint(\"è¿™æ˜¯ä¸€ä¸ªé«˜éš¾åº¦çš„ç»„åˆæ•°å­¦é—®é¢˜ï¼Œ\")\nprint(\"éœ€è¦æ·±å…¥çš„æ•°å­¦æ¨å¯¼æ‰èƒ½å¾—å‡º 2^(N/2) è¿™ä¸ªå…¬å¼\")\nprint(\"å…·ä½“çš„æ•°å­¦è¯æ˜æ¶‰åŠå¤æ‚çš„çº¦æŸåˆ†æå’Œç»„åˆç†è®º\")",
        "type": "standard_answer"
    },
    {
        "question_id": 9,
        "standard_answer": "import java.util.Scanner;\n\npublic class fvvb {\n    public static void main(String[] args) {\n        Scanner scanner = new Scanner(System.in);\n        int ans = 0;\n        \n        for (long i = 1; i <= 2025; i++) {\n            long res = i * i * i;\n            if (res % 10 == 3) {\n                ans++;\n            }\n        }\n        System.out.println(ans); //202\n    }\n}\n\n// ç®—æ³•åˆ†æï¼š\n// 1. é—®é¢˜æ ¸å¿ƒï¼šç»Ÿè®¡1åˆ°2025ä¸­ï¼Œå“ªäº›æ•°çš„ç«‹æ–¹å€¼ä¸ªä½æ•°ä¸º3\n// 2. ç«‹æ–¹æ•°ä¸ªä½æ•°è§„å¾‹ï¼š\n//    æ•°å­—ä¸ªä½    ç«‹æ–¹åä¸ªä½\n//    0          0\n//    1          1  \n//    2          8\n//    3          7\n//    4          4\n//    5          5\n//    6          6\n//    7          3  â† åªæœ‰7çš„ç«‹æ–¹ä¸ªä½æ˜¯3\n//    8          2\n//    9          9\n//\n// 3. å› æ­¤åªéœ€è¦ç»Ÿè®¡ä¸ªä½æ•°ä¸º7çš„æ•°å­—ä¸ªæ•°\n// 4. åœ¨1-2025ä¸­ï¼Œä¸ªä½ä¸º7çš„æ•°å­—æœ‰ï¼š7, 17, 27, ..., 2017\n// 5. æ•°é‡è®¡ç®—ï¼š(2017-7)/10 + 1 = 202\n//\n// éªŒè¯ï¼š\n// - 7Â³ = 343 (ä¸ªä½ä¸º3) âœ“\n// - 17Â³ = 4913 (ä¸ªä½ä¸º3) âœ“ \n// - 27Â³ = 19683 (ä¸ªä½ä¸º3) âœ“\n//\n// æ—¶é—´å¤æ‚åº¦ï¼šO(n) å…¶ä¸­n=2025\n// ç©ºé—´å¤æ‚åº¦ï¼šO(1)\n//\n// ä¼˜åŒ–æ€è·¯ï¼š\n// å¯ä»¥ç›´æ¥è®¡ç®—ä¸ªä½ä¸º7çš„æ•°å­—ä¸ªæ•°ï¼Œä½†é¢˜ç›®è¦æ±‚å®Œæ•´å®ç°",
        "type": "standard_answer"
    },
    {
        "question_id": 10,
        "standard_answer": "import threading\nimport time\nimport logging\n\n# é…ç½®æ—¥å¿—\nlogging.basicConfig(level=logging.INFO, format='%(asctime)s - %(levelname)s - %(message)s')\n\nclass BankAccount:\n    def __init__(self, balance):\n        self.balance = balance\n        self.lock = threading.Lock()  # çº¿ç¨‹é”ç¡®ä¿çº¿ç¨‹å®‰å…¨\n        logging.info(f\"é“¶è¡Œè´¦æˆ·åˆå§‹åŒ–ï¼Œåˆå§‹ä½™é¢: {self.balance}\")\n\n    def deposit(self, amount):\n        \"\"\"çº¿ç¨‹å®‰å…¨çš„å­˜æ¬¾æ–¹æ³•\"\"\"\n        with self.lock:  # ä½¿ç”¨é”ä¿æŠ¤ä¸´ç•ŒåŒº\n            old_balance = self.balance\n            self.balance += amount\n            logging.info(f\"å­˜æ¬¾ {amount}ã€‚ä½™é¢ä» {old_balance} å˜ä¸º {self.balance}\")\n\n    def withdraw(self, amount):\n        \"\"\"çº¿ç¨‹å®‰å…¨çš„å–æ¬¾æ–¹æ³•\"\"\"\n        with self.lock:  # ä½¿ç”¨é”ä¿æŠ¤ä¸´ç•ŒåŒº\n            if self.balance >= amount:\n                old_balance = self.balance\n                self.balance -= amount\n                logging.info(f\"å–æ¬¾ {amount}ã€‚ä½™é¢ä» {old_balance} å˜ä¸º {self.balance}\")\n            else:\n                logging.warning(f\"ä½™é¢ä¸è¶³ï¼Œæ— æ³•å–æ¬¾ {amount}ã€‚å½“å‰ä½™é¢: {self.balance}\")\n\n    def get_balance(self):\n        \"\"\"è·å–å½“å‰ä½™é¢ï¼ˆçº¿ç¨‹å®‰å…¨ï¼‰\"\"\"\n        with self.lock:\n            return self.balance\n\ndef perform_transactions(account, deposit_amount, withdraw_amount, thread_id):\n    \"\"\"æ‰§è¡Œäº‹åŠ¡ï¼šå…ˆå­˜æ¬¾åå–æ¬¾\"\"\"\n    thread_name = threading.current_thread().name\n    logging.info(f\"çº¿ç¨‹ {thread_name} (ID:{thread_id}) å¼€å§‹æ‰§è¡Œäº‹åŠ¡ï¼šå­˜æ¬¾ {deposit_amount}ï¼Œå–æ¬¾ {withdraw_amount}\")\n    \n    # æ‰§è¡Œå­˜æ¬¾\n    account.deposit(deposit_amount)\n    \n    # æ¨¡æ‹Ÿä¸€äº›å¤„ç†æ—¶é—´\n    time.sleep(0.01)\n    \n    # æ‰§è¡Œå–æ¬¾\n    account.withdraw(withdraw_amount)\n    \n    current_balance = account.get_balance()\n    logging.info(f\"çº¿ç¨‹ {thread_name} (ID:{thread_id}) äº‹åŠ¡å®Œæˆã€‚å½“å‰è´¦æˆ·ä½™é¢: {current_balance}\")\n\ndef simulate_transactions(account, num_threads):\n    \"\"\"æ¨¡æ‹Ÿå¤šçº¿ç¨‹äº‹åŠ¡\"\"\"\n    threads = []\n    logging.info(f\"å¼€å§‹æ¨¡æ‹Ÿ {num_threads} ä¸ªå¹¶å‘äº‹åŠ¡\")\n    \n    for i in range(num_threads):\n        t = threading.Thread(\n            target=perform_transactions, \n            args=(account, 200, 150, i+1),\n            name=f\"Transaction-{i+1}\"\n        )\n        threads.append(t)\n        t.start()\n\n    # ç­‰å¾…æ‰€æœ‰çº¿ç¨‹å®Œæˆ\n    for t in threads:\n        t.join()\n    \n    logging.info(\"æ‰€æœ‰äº‹åŠ¡å®Œæˆ\")\n\ndef test_bank_account():\n    \"\"\"æµ‹è¯•é“¶è¡Œè´¦æˆ·çš„çº¿ç¨‹å®‰å…¨æ€§\"\"\"\n    # åˆå§‹åŒ–è´¦æˆ·\n    initial_balance = 1000\n    account = BankAccount(initial_balance)\n    \n    logging.info(f\"=== é“¶è¡Œè´¦æˆ·å¹¶å‘æµ‹è¯•å¼€å§‹ ===\")\n    logging.info(f\"åˆå§‹ä½™é¢: {account.get_balance()}\")\n    \n    # æ¨¡æ‹Ÿ5ä¸ªå¹¶å‘äº‹åŠ¡\n    num_threads = 5\n    deposit_per_thread = 200\n    withdraw_per_thread = 150\n    \n    # æ‰§è¡Œå¹¶å‘äº‹åŠ¡\n    simulate_transactions(account, num_threads)\n    \n    # éªŒè¯æœ€ç»ˆä½™é¢\n    final_balance = account.get_balance()\n    expected_balance = initial_balance + num_threads * (deposit_per_thread - withdraw_per_thread)\n    \n    logging.info(f\"=== æµ‹è¯•ç»“æœ ===\")\n    logging.info(f\"æœ€ç»ˆä½™é¢: {final_balance}\")\n    logging.info(f\"é¢„æœŸä½™é¢: {expected_balance}\")\n    logging.info(f\"ä½™é¢è®¡ç®—: {initial_balance} + {num_threads} Ã— ({deposit_per_thread} - {withdraw_per_thread}) = {expected_balance}\")\n    \n    # æ–­è¨€éªŒè¯\n    try:\n        assert final_balance == expected_balance, f\"ä½™é¢ä¸åŒ¹é…ï¼æœŸæœ› {expected_balance}ï¼Œå®é™… {final_balance}\"\n        logging.info(\"âœ… æµ‹è¯•é€šè¿‡ï¼šä½™é¢è®¡ç®—æ­£ç¡®ï¼Œçº¿ç¨‹å®‰å…¨æœºåˆ¶æœ‰æ•ˆ\")\n        return True\n    except AssertionError as e:\n        logging.error(f\"âŒ æµ‹è¯•å¤±è´¥ï¼š{e}\")\n        return False\n\ndef demonstrate_race_condition():\n    \"\"\"æ¼”ç¤ºæ²¡æœ‰é”æ—¶çš„ç«æ€æ¡ä»¶ï¼ˆä»…ç”¨äºå¯¹æ¯”ï¼‰\"\"\"\n    logging.info(\"\\n=== ç«æ€æ¡ä»¶æ¼”ç¤ºï¼ˆæ— é”ç‰ˆæœ¬ï¼‰ ===\")\n    \n    class UnsafeBankAccount:\n        def __init__(self, balance):\n            self.balance = balance\n        \n        def deposit(self, amount):\n            # æ•…æ„æ·»åŠ å»¶è¿Ÿæ¥å¢åŠ ç«æ€æ¡ä»¶çš„æ¦‚ç‡\n            temp = self.balance\n            time.sleep(0.001)  # æ¨¡æ‹Ÿå¤„ç†æ—¶é—´\n            self.balance = temp + amount\n            \n        def withdraw(self, amount):\n            if self.balance >= amount:\n                temp = self.balance\n                time.sleep(0.001)  # æ¨¡æ‹Ÿå¤„ç†æ—¶é—´\n                self.balance = temp - amount\n    \n    unsafe_account = UnsafeBankAccount(1000)\n    \n    def unsafe_transaction(account):\n        account.deposit(200)\n        account.withdraw(150)\n    \n    # å¯åŠ¨å¤šä¸ªçº¿ç¨‹ï¼ˆæ— é”ï¼‰\n    threads = []\n    for i in range(5):\n        t = threading.Thread(target=unsafe_transaction, args=(unsafe_account,))\n        threads.append(t)\n        t.start()\n    \n    for t in threads:\n        t.join()\n    \n    logging.info(f\"æ— é”ç‰ˆæœ¬æœ€ç»ˆä½™é¢: {unsafe_account.balance}\")\n    logging.info(f\"é¢„æœŸä½™é¢: 1250\")\n    logging.info(f\"å·®å¼‚: {1250 - unsafe_account.balance}\")\n    \n    if unsafe_account.balance != 1250:\n        logging.warning(\"âš ï¸  æ— é”ç‰ˆæœ¬å‡ºç°ç«æ€æ¡ä»¶ï¼Œä½™é¢è®¡ç®—é”™è¯¯\")\n    else:\n        logging.info(\"â„¹ï¸  æ— é”ç‰ˆæœ¬è¿™æ¬¡æ²¡æœ‰å‡ºç°ç«æ€æ¡ä»¶ï¼ˆå¶ç„¶æƒ…å†µï¼‰\")\n\nif __name__ == \"__main__\":\n    # è¿è¡Œå®‰å…¨ç‰ˆæœ¬æµ‹è¯•\n    success = test_bank_account()\n    \n    # æ¼”ç¤ºç«æ€æ¡ä»¶ï¼ˆå¯é€‰ï¼‰\n    demonstrate_race_condition()\n    \n    if success:\n        print(\"\\nğŸ‰ é“¶è¡Œè´¦æˆ·å¹¶å‘å®‰å…¨å®ç°æˆåŠŸï¼\")\n    else:\n        print(\"\\nâŒ å®ç°å­˜åœ¨é—®é¢˜ï¼Œè¯·æ£€æŸ¥ä»£ç \")\n\n# é—®é¢˜åˆ†ææ€»ç»“ï¼š\n\"\"\"\n=== å¹¶å‘å®‰å…¨é—®é¢˜åˆ†æ ===\n\n1. æ ¹æœ¬åŸå› ï¼š\n   - ç«æ€æ¡ä»¶ï¼šå¤šä¸ªçº¿ç¨‹åŒæ—¶è¯»å†™å…±äº«å˜é‡ balance\n   - éåŸå­æ“ä½œï¼šbalance += amount åŒ…å«è¯»å–-è®¡ç®—-å†™å…¥ä¸‰ä¸ªæ­¥éª¤\n   - æ— åŒæ­¥æœºåˆ¶ï¼šæ²¡æœ‰é”æˆ–å…¶ä»–åŒæ­¥åŸè¯­ä¿æŠ¤ä¸´ç•ŒåŒº\n\n2. è§£å†³æ–¹æ¡ˆï¼š\n   - ä½¿ç”¨ threading.Lock() åˆ›å»ºäº’æ–¥é”\n   - ç”¨ with self.lock: è¯­å¥ä¿æŠ¤æ‰€æœ‰è®¿é—® balance çš„ä»£ç æ®µ\n   - ç¡®ä¿æ‰€æœ‰ä½™é¢æ“ä½œéƒ½æ˜¯åŸå­æ€§çš„\n\n3. å…³é”®æ”¹è¿›ï¼š\n   - çº¿ç¨‹é”ï¼šself.lock = threading.Lock()\n   - ä¸´ç•ŒåŒºä¿æŠ¤ï¼šwith self.lock: ç¡®ä¿äº’æ–¥è®¿é—®\n   - æ—¥å¿—è®°å½•ï¼šä½¿ç”¨ logging æ¨¡å—æ›¿ä»£ print\n   - æµ‹è¯•éªŒè¯ï¼šassert è¯­å¥éªŒè¯æœ€ç»ˆç»“æœ\n\n4. æ€§èƒ½è€ƒè™‘ï¼š\n   - é”çš„ç²’åº¦ï¼šåªä¿æŠ¤å¿…è¦çš„ä»£ç æ®µ\n   - é¿å…æ­»é”ï¼šä½¿ç”¨ with è¯­å¥è‡ªåŠ¨é‡Šæ”¾é”\n   - æ—¥å¿—çº§åˆ«ï¼šå¯é…ç½®çš„æ—¥å¿—è¾“å‡º\n\n5. æµ‹è¯•ç­–ç•¥ï¼š\n   - å¤šçº¿ç¨‹å¹¶å‘æµ‹è¯•\n   - ä½™é¢è®¡ç®—éªŒè¯\n   - å¯¹æ¯”æ— é”ç‰ˆæœ¬å±•ç¤ºé—®é¢˜\n\"\"\"\n\n# é¢„æœŸè¾“å‡ºè¯´æ˜ï¼š\n\"\"\"\nç¨‹åºè¿è¡Œååº”è¯¥çœ‹åˆ°ï¼š\n1. è¯¦ç»†çš„æ—¥å¿—è®°å½•æ¯ä¸ªçº¿ç¨‹çš„æ“ä½œ\n2. æœ€ç»ˆä½™é¢ä¸º 1250ï¼ˆ1000 + 5Ã—(200-150)ï¼‰\n3. æµ‹è¯•é€šè¿‡çš„ç¡®è®¤ä¿¡æ¯\n4. æ— é”ç‰ˆæœ¬çš„å¯¹æ¯”æ¼”ç¤ºï¼ˆå¯èƒ½å‡ºç°é”™è¯¯ä½™é¢ï¼‰\n\"\"\"",
        "type": "standard_answer"
    }
] 